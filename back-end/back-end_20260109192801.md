# Reporte de proyecto

## Estructura del proyecto

```
/var/www/html/1DAM/@CEAC/[Proyecto] WePlan/back-end
‚îú‚îÄ‚îÄ 000-Bases de Datos
‚îÇ   ‚îú‚îÄ‚îÄ 001-tablas.sql
‚îÇ   ‚îú‚îÄ‚îÄ 002-Creacion de bases de datos.sql
‚îÇ   ‚îú‚îÄ‚îÄ 002-diagrama de la base de datos.json
‚îÇ   ‚îú‚îÄ‚îÄ 002-diagrama de la bases de datos.png
‚îÇ   ‚îú‚îÄ‚îÄ 003-plantilla de conexion.py
‚îÇ   ‚îî‚îÄ‚îÄ subcategorias_actividades.sql
‚îú‚îÄ‚îÄ 002-PHP
‚îÇ   ‚îú‚îÄ‚îÄ 001-guia.md
‚îÇ   ‚îú‚îÄ‚îÄ 002-primera prueba de conexion.php
‚îÇ   ‚îú‚îÄ‚îÄ 003-procesa_login.php
‚îÇ   ‚îú‚îÄ‚îÄ 004-login.php
‚îÇ   ‚îú‚îÄ‚îÄ 005-exito.php
‚îÇ   ‚îú‚îÄ‚îÄ 006-logout.php
‚îÇ   ‚îî‚îÄ‚îÄ tipo_de_usuario
‚îÇ       ‚îú‚îÄ‚îÄ 001-admin BRYAN.php
‚îÇ       ‚îú‚îÄ‚îÄ 002-admin AYMAN[Super-mejorado].php
‚îÇ       ‚îú‚îÄ‚îÄ admin
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ create
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formulario.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ procesaformulario.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ delete
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ eliminar.php
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ formulario_eliminar.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ read
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ leer.php
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ update
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ actualizar.php
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ formulario_actualizar.php
‚îÇ       ‚îú‚îÄ‚îÄ admin.php
‚îÇ       ‚îú‚îÄ‚îÄ host.php
‚îÇ       ‚îî‚îÄ‚îÄ usuario.php
‚îî‚îÄ‚îÄ lightgoldenrodyellow.py
```

## C√≥digo (intercalado)

# back-end
**lightgoldenrodyellow.py**
```python
#!/usr/bin/env python3
import os
import sys
import argparse
from datetime import datetime

# =========================
# Configuraci√≥n m√≠nima
# =========================
EXTENSIONES_PERMITIDAS = (
    ".html", ".css", ".js", ".php", ".py", ".java", ".sql",
    ".c", ".cpp", ".cu", ".h", ".json", ".xml", ".md"
)
CARPETAS_EXCLUIDAS = {
    ".git", "node_modules", "vendor", "venv", "__pycache__",
    "modelo_entrenado", ".venv"
}

LANG_MAP = {
    ".html": "html", ".css": "css", ".js": "js", ".php": "php",
    ".py": "python", ".java": "java", ".sql": "sql", ".c": "c",
    ".cpp": "cpp", ".cu": "cuda", ".h": "c", ".json": "json",
    ".xml": "xml", ".md": "markdown",
}

# =========================
# Utilidades
# =========================
def construir_mapa_directorios(ruta_raiz: str) -> str:
    """Devuelve un √°rbol de directorios estilo 'tree', excluyendo carpetas no deseadas."""
    lineas = []
    raiz_abs = os.path.abspath(ruta_raiz)
    lineas.append(raiz_abs)

    def interno(dir_path: str, prefijo: str = ""):
        try:
            entradas = sorted(os.listdir(dir_path))
        except Exception:
            return
        # Filtra carpetas excluidas
        entradas_visibles = []
        for e in entradas:
            full = os.path.join(dir_path, e)
            if os.path.isdir(full) and e in CARPETAS_EXCLUIDAS:
                continue
            entradas_visibles.append(e)

        for i, entrada in enumerate(entradas_visibles):
            ruta_completa = os.path.join(dir_path, entrada)
            conector = "‚îî‚îÄ‚îÄ " if i == len(entradas_visibles) - 1 else "‚îú‚îÄ‚îÄ "
            lineas.append(prefijo + conector + entrada)
            if os.path.isdir(ruta_completa):
                extension = "    " if i == len(entradas_visibles) - 1 else "‚îÇ   "
                interno(ruta_completa, prefijo + extension)

    interno(ruta_raiz)
    return "\n".join(lineas)


def generar_reporte_intercalado(ruta_raiz: str, nivel: int = 1) -> str:
    """
    Recorre la carpeta y, para cada archivo con extensi√≥n permitida,
    inserta su contenido en un bloque de c√≥digo Markdown.
    """
    encabezado = "#" * nivel
    nombre_carpeta = os.path.basename(ruta_raiz) or ruta_raiz
    lineas = [f"{encabezado} {nombre_carpeta}"]

    try:
        entradas = sorted(os.listdir(ruta_raiz))
    except Exception as e:
        lineas.append(f"Error listando la carpeta: {e}")
        return "\n".join(lineas)

    # Archivos de este nivel
    for entrada in entradas:
        ruta_completa = os.path.join(ruta_raiz, entrada)
        if os.path.isfile(ruta_completa) and entrada.lower().endswith(EXTENSIONES_PERMITIDAS):
            ext = os.path.splitext(entrada)[1].lower()
            lang = LANG_MAP.get(ext, "")
            lineas.append(f"**{entrada}**")
            try:
                with open(ruta_completa, "r", encoding="utf-8", errors="ignore") as f:
                    contenido = f.read()
            except Exception as e:
                contenido = f"Error al leer el archivo: {e}"
            lineas.append(f"```{lang}")
            lineas.append(contenido)
            lineas.append("```")

    # Subcarpetas (excluyendo las no deseadas)
    for entrada in entradas:
        ruta_completa = os.path.join(ruta_raiz, entrada)
        if os.path.isdir(ruta_completa) and entrada not in CARPETAS_EXCLUIDAS:
            lineas.append(generar_reporte_intercalado(ruta_completa, nivel + 1))

    return "\n".join(lineas)


def generar_reporte(ruta_origen: str) -> str:
    """
    Genera el contenido completo del reporte en Markdown:
    - √Årbol de directorios
    - C√≥digo intercalado
    """
    arbol = construir_mapa_directorios(ruta_origen)
    intercalado = generar_reporte_intercalado(ruta_origen)

    partes = []
    partes.append("# Reporte de proyecto\n")
    partes.append("## Estructura del proyecto\n")
    partes.append("```\n" + arbol + "\n```\n")
    partes.append("## C√≥digo (intercalado)\n")
    partes.append(intercalado)
    return "\n".join(partes)


# =========================
# CLI
# =========================
def main():
    parser = argparse.ArgumentParser(
        description="Genera un reporte Markdown de una carpeta de c√≥digo (√°rbol + contenidos)."
    )
    parser.add_argument("source_root", help="Carpeta origen a inspeccionar")
    parser.add_argument("dest_folder", help="Carpeta destino donde guardar el reporte")
    args = parser.parse_args()

    source_root = os.path.abspath(args.source_root)
    dest_folder = os.path.abspath(args.dest_folder)

    if not os.path.isdir(source_root):
        print(f"[ERROR] La carpeta origen no existe o no es un directorio: {source_root}", file=sys.stderr)
        sys.exit(1)

    os.makedirs(dest_folder, exist_ok=True)

    base_name = os.path.basename(source_root.rstrip(os.sep)) or "reporte"
    timestamp = datetime.now().strftime("%Y%m%d%H%M%S")
    out_name = f"{base_name}_{timestamp}.md"
    out_path = os.path.join(dest_folder, out_name)

    try:
        contenido = generar_reporte(source_root)
        with open(out_path, "w", encoding="utf-8") as f:
            f.write(contenido)
    except KeyboardInterrupt:
        print("\n[INTERRUPT] Proceso cancelado por el usuario.", file=sys.stderr)
        sys.exit(130)
    except Exception as e:
        print(f"[ERROR] No se pudo generar o guardar el reporte: {e}", file=sys.stderr)
        sys.exit(2)

    print(f"[OK] Reporte generado: {out_path}")


if __name__ == "__main__":
    main()


```
## 000-Bases de Datos
**001-tablas.sql**
```sql
WePlanDB:Usuario (Usuario que puede Leer las tablas; Puede Crear Actividades) ->
 Configuraci√≥n -> 
 {
  [nombre, apellidos, tel√©fono, direcci√≥n, correo electr√≥nico, pa√≠s]
 },
 
 Grupos ->{
  [nombre,descripci√≥n,miembros]
 },
 
 Actividades ->
 {
  Deporte[F√∫tbol,P√°del,Baloncesto,etc],
  Relajaci√≥n[Caf√©,Charla,Cena,etc],
  M√∫sica[Conciertos,Karaoke,etc],
  Educaci√≥n[Idiomas,Artes,Danza,etc]
 },
 
 Aficiones[]
 
WePlanDB:Administrador de grupos (usuario que puede Leer y ACTUALIZAR las tablas; Puede Crear Actividades) -> 
 Grupos ->{
  [nombre,descripci√≥n,miembros]
 }
 
WePlan:Administrador (usuario que puede Crear,Leer,ACTUALIZAR y ELIMINAR las tablas) [nosotros]


TABLAS CREADAS:
 Importantes:
  -usuarios
  -grupos
  -categorias_actividades
  -subcategorias_actividades
  -aficiones
  -eventos
  -evento_participantes
 Relaciones:
  -usuario_grupo
  -usuario_aficion
  -grupo_subcategorias

INDICES CREADOS:
 Indice para busqueda frecuentes:
  idx_usuarios_email
  idx_usuarios_nombre
  idx_grupos_nombre
  idx_eventos_fecha
  idx_eventos_grupo
 
 Indices para relaciones: 
  idx_usuarios_grupo_usuario
  idx_usuarios_grupo_grupo

VISTAS CREADAS:
 vista_grupo_con_miembros
 vista_eventos_proximos
 vista_usuario_aficiones

```
**002-Creacion de bases de datos.sql**
```sql
--sudo mysql -u root -p 
CREATE DATABASE WePlanDB;
USE WePlanDB;

CREATE TABLE usuarios (
    usuario_id INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(50) NOT NULL,
    apellidos VARCHAR(150) NOT NULL,
    telefono VARCHAR(20),
    direccion VARCHAR(255),
    correo_electronico VARCHAR(150) UNIQUE NOT NULL,
    pais VARCHAR(50),
    contrasenya VARCHAR(255) NOT NULL,
    fecha_registro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    tipo_de_usuario VARCHAR(50)
);

-- Registros de ejemplo
INSERT INTO usuarios (nombre, apellidos, telefono, direccion, correo_electronico, pais, contrasenya) VALUES
('Mar√≠a', 'Garc√≠a L√≥pez', '+34 600 111 222', 'Calle Mayor 10, Madrid', 'maria.garcia@email.com', 'Espa√±a', '12345678'),
('Carlos', 'Rodr√≠guez P√©rez', '+34 611 222 333', 'Av. Diagonal 25, Barcelona', 'carlos.rodriguez@email.com', 'Espa√±a', '12345678'),
('Ana', 'Mart√≠nez S√°nchez', '+34 622 333 444', 'Calle Gran V√≠a 45, Valencia', 'ana.martinez@email.com', 'Espa√±a', '12345678'),
('David', 'Fern√°ndez Ruiz', '+34 633 444 555', 'Plaza Espa√±a 3, Sevilla', 'david.fernandez@email.com', 'Espa√±a', '12345678'),
('Laura', 'G√≥mez D√≠az', '+34 644 555 666', 'Calle Sierpes 15, Sevilla', 'laura.gomez@email.com', 'Espa√±a', '12345678'),
('Javier', 'Hern√°ndez Castro', '+34 655 666 777', 'Calle Preciados 8, Madrid', 'javier.hernandez@email.com', 'Espa√±a', '12345678');

--Actualizacion de Usuarios para que puedan ver una cosa o otra segun lo indicado por tipo_de_usuario/003-procesalogin.php
UPDATE usuarios 
SET TIPO_DE_USUARIO = 'admin'
WHERE nombre IN ('Mar√≠a', 'Carlos');

UPDATE usuarios 
SET TIPO_DE_USUARIO = 'host'
WHERE nombre IN ('Ana', 'David');

UPDATE usuarios 
SET TIPO_DE_USUARIO = 'usuario'
WHERE nombre IN ('Laura', 'Javier');

CREATE TABLE grupos (
    grupo_id INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100) NOT NULL,
    descripcion TEXT,
    creador_id INT,
    fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    max_miembros INT DEFAULT 50,
    FOREIGN KEY (creador_id) REFERENCES usuarios(usuario_id)
);

-- Registros de ejemplo
INSERT INTO grupos (nombre, descripcion, creador_id) VALUES
('F√∫tbol Los Domingos', 'Grupo para jugar al f√∫tbol los domingos por la ma√±ana', 1),
('Club de Caf√© Literario', 'Reuniones para tomar caf√© y comentar libros', 2),
('P√°del Amigos', 'Grupo para jugar al p√°del entre semana', 3),
('Conciertos Madrid', 'Salidas a conciertos en Madrid', 4),
('Intercambio de Idiomas', 'Pr√°ctica de ingl√©s y espa√±ol', 5),
('Running Matutino', 'Grupo de running a las 7 AM', 6);

CREATE TABLE categorias_actividades (
    categoria_id INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(50) NOT NULL,
    descripcion TEXT
);

-- Inserci√≥n de categor√≠as principales
INSERT INTO categorias_actividades (nombre, descripcion) VALUES
('Deporte', 'Actividades deportivas y ejercicio f√≠sico'),
('Relajaci√≥n', 'Actividades sociales y de ocio relajado'),
('M√∫sica', 'Eventos y actividades musicales'),
('Educaci√≥n', 'Actividades de aprendizaje y desarrollo');

CREATE TABLE subcategorias_actividades (
    subcategoria_id INT PRIMARY KEY AUTO_INCREMENT,
    categoria_id INT NOT NULL,
    nombre VARCHAR(50) NOT NULL,
    descripcion TEXT,
    FOREIGN KEY (categoria_id) REFERENCES categorias_actividades(categoria_id)
);

-- Inserci√≥n de subcategor√≠as
INSERT INTO subcategorias_actividades (categoria_id, nombre) VALUES
-- Deporte
(1, 'F√∫tbol'), (1, 'P√°del'), (1, 'Baloncesto'), (1, 'Tenis'),
(1, 'Nataci√≥n'), (1, 'Running'), (1, 'Ciclismo'), (1, 'Yoga'),
-- Relajaci√≥n
(2, 'Caf√©'), (2, 'Charla'), (2, 'Cena'), (2, 'Paseo'),
(2, 'Cine'), (2, 'Juegos de mesa'), (2, 'Picnic'),
-- M√∫sica
(3, 'Conciertos'), (3, 'Karaoke'), (3, 'Club de m√∫sica'),
(3, 'Taller de instrumentos'), (3, 'Festivales'),
-- Educaci√≥n
(4, 'Idiomas'), (4, 'Artes'), (4, 'Danza'), (4, 'Cocina'),
(4, 'Fotograf√≠a'), (4, 'Literatura'), (4, 'Teatro');

CREATE TABLE aficiones (
    aficion_id INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100) NOT NULL,
    categoria VARCHAR(50)
);

-- Inserci√≥n de aficiones comunes
INSERT INTO aficiones (nombre, categoria) VALUES
('Lectura', 'Cultural'), ('Viajes', 'Ocio'), ('Cine', 'Entretenimiento'),
('Cocina', 'Gastronom√≠a'), ('Fotograf√≠a', 'Art√≠stica'),
('Senderismo', 'Deporte'), ('Jardiner√≠a', 'Ocio'),
('Videojuegos', 'Entretenimiento'), ('Pintura', 'Art√≠stica'),
('M√∫sica', 'Cultural'), ('Baile', 'Art√≠stica'), ('Deportes', 'Actividad');

CREATE TABLE usuario_grupo (
    usuario_id INT NOT NULL,
    grupo_id INT NOT NULL,
    PRIMARY KEY (usuario_id, grupo_id),
    FOREIGN KEY (usuario_id) REFERENCES usuarios(usuario_id),
    FOREIGN KEY (grupo_id) REFERENCES grupos(grupo_id)
);

-- Registros de ejemplo para comprobar
INSERT INTO usuario_grupo (usuario_id, grupo_id) VALUES
(1, 1), (1, 3),  -- Mar√≠a en F√∫tbol y P√°del
(2, 2), (2, 4),  -- Carlos en Caf√© y Conciertos
(3, 3), (3, 5),  -- Ana en P√°del e Idiomas
(4, 1), (4, 4),  -- David en F√∫tbol y Conciertos
(5, 2), (5, 5),  -- Laura en Caf√© e Idiomas
(6, 6);          -- Javier solo en Running

CREATE TABLE usuario_aficion (
    usuario_id INT NOT NULL,
    aficion_id INT NOT NULL,
    PRIMARY KEY (usuario_id, aficion_id),
    FOREIGN KEY (usuario_id) REFERENCES usuarios(usuario_id),
    FOREIGN KEY (aficion_id) REFERENCES aficiones(aficion_id)
);

INSERT INTO usuario_aficion (usuario_id, aficion_id) VALUES
(1, 1), (1, 4),  -- Mar√≠a: Lectura y Cocina
(2, 2), (2, 5),  -- Carlos: Viajes y Fotograf√≠a
(3, 3), (3, 6),  -- Ana: Cine y Senderismo
(4, 10), (4, 12), -- David: M√∫sica y Deportes
(5, 1), (5, 8),  -- Laura: Lectura y Pintura
(6, 7);          -- Javier: Jardiner√≠a

CREATE TABLE grupo_subcategoria (
    grupo_id INT NOT NULL,
    subcategoria_id INT NOT NULL,
    PRIMARY KEY (grupo_id, subcategoria_id),
    FOREIGN KEY (grupo_id) REFERENCES grupos(grupo_id),
    FOREIGN KEY (subcategoria_id) REFERENCES subcategorias_actividades(subcategoria_id)
);

INSERT INTO grupo_subcategoria (grupo_id, subcategoria_id) VALUES
(1, 1),   -- F√∫tbol Los Domingos -> F√∫tbol (subcategoria_id 1)
(2, 9),   -- Club de Caf√© -> Caf√© (subcategoria_id 9)
(2, 10),  -- Club de Caf√© -> Charla (subcategoria_id 10)
(3, 2),   -- P√°del Amigos -> P√°del (subcategoria_id 2)
(4, 16),  -- Conciertos Madrid -> Conciertos (subcategoria_id 16)
(5, 21),  -- Intercambio de Idiomas -> Idiomas (subcategoria_id 21)
(6, 6);   -- Running Matutino -> Running (subcategoria_id 6)

CREATE TABLE eventos (
    evento_id INT PRIMARY KEY AUTO_INCREMENT,
    grupo_id INT NOT NULL,
    subcategoria_id INT,
    titulo VARCHAR(100) NOT NULL,
    fecha_hora DATETIME NOT NULL,
    lugar VARCHAR(200),
    FOREIGN KEY (grupo_id) REFERENCES grupos(grupo_id),
    FOREIGN KEY (subcategoria_id) REFERENCES subcategorias_actividades(subcategoria_id)
);

INSERT INTO eventos (grupo_id, subcategoria_id, titulo, fecha_hora, lugar) VALUES
(1, 1, 'Partido Domingo', '2024-03-10 10:00:00', 'Campo Deportivo La Elipa'),
(2, 9, 'Caf√© Literario: Kafka', '2024-03-12 18:00:00', 'Caf√© Gij√≥n'),
(3, 2, 'Torneo P√°del', '2024-03-15 19:00:00', 'Club P√°del Madrid'),
(4, 16, 'Concierto Rock', '2024-03-20 21:00:00', 'Sala Caracol'),
(5, 21, 'Intercambio Ingl√©s-Espa√±ol', '2024-03-11 20:00:00', 'Biblioteca Municipal'),
(6, 6, 'Running Parque Retiro', '2024-03-13 07:00:00', 'Parque del Retiro');

CREATE TABLE evento_participantes (
    evento_id INT NOT NULL,
    usuario_id INT NOT NULL,
    PRIMARY KEY (evento_id, usuario_id),
    FOREIGN KEY (evento_id) REFERENCES eventos(evento_id),
    FOREIGN KEY (usuario_id) REFERENCES usuarios(usuario_id)
);

INSERT INTO evento_participantes (evento_id, usuario_id) VALUES
(1, 1), (1, 4),   -- Partido: Mar√≠a y David
(2, 2), (2, 5),   -- Caf√©: Carlos y Laura
(3, 1), (3, 3),   -- P√°del: Mar√≠a y Ana
(4, 2), (4, 4),   -- Concierto: Carlos y David
(5, 3), (5, 5),   -- Idiomas: Ana y Laura
(6, 6);           -- Running: Javier

---------------------
--USUARIO!!-----------
---------------------

-- Creacion de usuario que podr√° acceder a la base de datos
CREATE USER 'usuario-weplan'@'localhost' IDENTIFIED BY 'Usuarioweplan123$';

GRANT USAGE ON *.* TO 'usuario-weplan'@'localhost';

ALTER USER 'usuario-weplan'@'localhost'
REQUIRE NONE
WITH MAX_QUERIES_PER_HOUR 0
MAX_CONNECTIONS_PER_HOUR 0
MAX_UPDATES_PER_HOUR 0
MAX_USER_CONNECTIONS 0;

GRANT ALL PRIVILEGES ON WePlanDB.* TO 'usuario-weplan'@'localhost';

FLUSH PRIVILEGES;

---------------------
--INDICES!!-----------
---------------------

-- Indices para b√∫squedas frecuentes
CREATE INDEX idx_usuarios_email ON usuarios(correo_electronico);
CREATE INDEX idx_usuarios_nombre ON usuarios(nombre, apellidos);
CREATE INDEX idx_grupos_nombre ON grupos(nombre);
CREATE INDEX idx_eventos_fecha ON eventos(fecha_hora);
CREATE INDEX idx_eventos_grupo ON eventos(grupo_id);

-- √çndices para relaciones
CREATE INDEX idx_usuario_grupo_usuario ON usuario_grupo(usuario_id);
CREATE INDEX idx_usuario_grupo_grupo ON usuario_grupo(grupo_id);


---------------------
--VISTAS!!-----------
---------------------

-- Vista para ver grupos con n√∫mero de miembros
CREATE VIEW vista_grupos_con_miembros AS
SELECT 
    g.grupo_id,
    g.nombre AS grupo,
    COUNT(ug.usuario_id) AS miembros,
    u.nombre AS creador,
    g.descripcion
FROM grupos g
LEFT JOIN usuario_grupo ug ON g.grupo_id = ug.grupo_id
JOIN usuarios u ON g.creador_id = u.usuario_id
GROUP BY g.grupo_id;

-- Vista para eventos pr√≥ximos
CREATE VIEW vista_eventos_proximos AS
SELECT 
    e.evento_id,
    e.titulo, 
    e.fecha_hora, 
    e.lugar,
    g.nombre AS grupo,
    s.nombre AS actividad
FROM eventos e
JOIN grupos g ON e.grupo_id = g.grupo_id
LEFT JOIN subcategorias_actividades s ON e.subcategoria_id = s.subcategoria_id
WHERE e.fecha_hora > NOW()
ORDER BY e.fecha_hora;

-- Vista para aficiones de usuarios
CREATE VIEW vista_usuario_aficiones AS
SELECT 
    u.usuario_id,
    u.nombre, 
    u.apellidos,
    GROUP_CONCAT(a.nombre SEPARATOR ', ') AS aficiones
FROM usuarios u
LEFT JOIN usuario_aficion ua ON u.usuario_id = ua.usuario_id
LEFT JOIN aficiones a ON ua.aficion_id = a.aficion_id
GROUP BY u.usuario_id;

```
**002-diagrama de la base de datos.json**
```json
{
  "formas": [
    {
      "id": "forma-2",
      "tipo": "rectangle",
      "left": "236.531px",
      "top": "175.688px",
      "width": "",
      "height": "",
      "texto": "Controles[PHP+PY]"
    },
    {
      "id": "forma-3",
      "tipo": "rectangle",
      "left": "455.587px",
      "top": "249.893px",
      "width": "",
      "height": "",
      "texto": "BBDD[MySQL]"
    },
    {
      "id": "forma-5",
      "tipo": "rectangle",
      "left": "657.79px",
      "top": "251.125px",
      "width": "",
      "height": "",
      "texto": "Vistas"
    },
    {
      "id": "forma-6",
      "tipo": "text",
      "left": "792.484px",
      "top": "259.002px",
      "width": "",
      "height": "",
      "texto": "vista_grupo_con_miembrosvista_eventos_proximosvista_usuario_aficiones"
    },
    {
      "id": "forma-7",
      "tipo": "rectangle",
      "left": "659.25px",
      "top": "207.547px",
      "width": "",
      "height": "",
      "texto": "Indices"
    },
    {
      "id": "forma-15",
      "tipo": "entity",
      "left": "1px",
      "top": "-4px",
      "width": "",
      "height": "",
      "entityName": "UI[HTML+CSS]",
      "properties": [
        {
          "id": "prop-1",
          "name": "Home"
        },
        {
          "id": "prop-2",
          "name": "Actividades"
        },
        {
          "id": "prop-3",
          "name": "Configuraciones"
        },
        {
          "id": "prop-4",
          "name": "Notificaciones"
        },
        {
          "id": "prop-5",
          "name": "Perfil"
        },
        {
          "id": "prop-69",
          "name": "atributo"
        }
      ]
    },
    {
      "id": "forma-22",
      "tipo": "entity",
      "left": "343.234px",
      "top": "382.5px",
      "width": "",
      "height": "",
      "entityName": "usuarios",
      "properties": [
        {
          "id": "prop-11",
          "name": "usuario_id"
        },
        {
          "id": "prop-20",
          "name": "nombre"
        },
        {
          "id": "prop-21",
          "name": "apellidos"
        },
        {
          "id": "prop-22",
          "name": "telefono"
        },
        {
          "id": "prop-23",
          "name": "direccion"
        },
        {
          "id": "prop-24",
          "name": "correo_electronico"
        },
        {
          "id": "prop-25",
          "name": "pais"
        },
        {
          "id": "prop-26",
          "name": "fecha_registro"
        }
      ]
    },
    {
      "id": "forma-23",
      "tipo": "entity",
      "left": "286.297px",
      "top": "837.031px",
      "width": "",
      "height": "",
      "entityName": "grupo_subcategorias",
      "properties": [
        {
          "id": "prop-12",
          "name": "grupo_id"
        },
        {
          "id": "prop-52",
          "name": "subcategoria_id"
        },
        {
          "id": "prop-53",
          "name": "atributo"
        },
        {
          "id": "prop-54",
          "name": "atributo"
        }
      ]
    },
    {
      "id": "forma-24",
      "tipo": "entity",
      "left": "523.922px",
      "top": "481.875px",
      "width": "",
      "height": "",
      "entityName": "evento_participantes",
      "properties": [
        {
          "id": "prop-13",
          "name": "evento_id"
        },
        {
          "id": "prop-62",
          "name": "usuario_id"
        },
        {
          "id": "prop-63",
          "name": "atributo"
        },
        {
          "id": "prop-64",
          "name": "atributo"
        }
      ]
    },
    {
      "id": "forma-25",
      "tipo": "entity",
      "left": "522.641px",
      "top": "630.031px",
      "width": "",
      "height": "",
      "entityName": "eventos",
      "properties": [
        {
          "id": "prop-14",
          "name": "evento_id"
        },
        {
          "id": "prop-55",
          "name": "grupo_id"
        },
        {
          "id": "prop-56",
          "name": "subcategoria_id"
        },
        {
          "id": "prop-57",
          "name": "titulo"
        },
        {
          "id": "prop-58",
          "name": "fecha_hora"
        },
        {
          "id": "prop-59",
          "name": "lugar"
        },
        {
          "id": "prop-60",
          "name": "FK grupo_id references grupos(id)"
        },
        {
          "id": "prop-61",
          "name": "atributo"
        }
      ]
    },
    {
      "id": "forma-27",
      "tipo": "entity",
      "left": "776.527px",
      "top": "353.81px",
      "width": "",
      "height": "",
      "entityName": "aficiones",
      "properties": [
        {
          "id": "prop-16",
          "name": "aficion_id"
        },
        {
          "id": "prop-39",
          "name": "nombre (NOT NULL)"
        },
        {
          "id": "prop-40",
          "name": "categoria"
        }
      ]
    },
    {
      "id": "forma-28",
      "tipo": "entity",
      "left": "523.641px",
      "top": "330.094px",
      "width": "",
      "height": "",
      "entityName": "usuario_aficion",
      "properties": [
        {
          "id": "prop-17",
          "name": "usuario_id"
        },
        {
          "id": "prop-41",
          "name": "aficion_id"
        },
        {
          "id": "prop-50",
          "name": "atributo"
        },
        {
          "id": "prop-51",
          "name": "atributo"
        }
      ]
    },
    {
      "id": "forma-29",
      "tipo": "entity",
      "left": "671.094px",
      "top": "876.828px",
      "width": "",
      "height": "",
      "entityName": "categorias_actividades",
      "properties": [
        {
          "id": "prop-18",
          "name": "categoria_id"
        },
        {
          "id": "prop-33",
          "name": "nombre (NOT NULL)"
        },
        {
          "id": "prop-34",
          "name": "descripcion"
        }
      ]
    },
    {
      "id": "forma-30",
      "tipo": "entity",
      "left": "337px",
      "top": "621.25px",
      "width": "",
      "height": "",
      "entityName": "grupos",
      "properties": [
        {
          "id": "prop-19",
          "name": "grupo_id"
        },
        {
          "id": "prop-27",
          "name": "nombre"
        },
        {
          "id": "prop-28",
          "name": "descripcion"
        },
        {
          "id": "prop-29",
          "name": "creador_id"
        },
        {
          "id": "prop-30",
          "name": "fecha_creacion"
        },
        {
          "id": "prop-31",
          "name": "max_miembros (50)"
        },
        {
          "id": "prop-32",
          "name": "atributo"
        }
      ]
    },
    {
      "id": "forma-32",
      "tipo": "entity",
      "left": "165.437px",
      "top": "521.016px",
      "width": "",
      "height": "",
      "entityName": "usuario_grupo",
      "properties": [
        {
          "id": "prop-46",
          "name": "usuario_id"
        },
        {
          "id": "prop-47",
          "name": "grupo_id"
        },
        {
          "id": "prop-48",
          "name": "atributo"
        },
        {
          "id": "prop-49",
          "name": "atributo"
        }
      ]
    },
    {
      "id": "forma-33",
      "tipo": "entity",
      "left": "468.781px",
      "top": "876.281px",
      "width": "",
      "height": "",
      "entityName": "subcategorias_actividades",
      "properties": [
        {
          "id": "prop-65",
          "name": "subcategoria_id"
        },
        {
          "id": "prop-66",
          "name": "categoria_id"
        },
        {
          "id": "prop-67",
          "name": "nombre"
        },
        {
          "id": "prop-68",
          "name": "descripcion"
        }
      ]
    },
    {
      "id": "forma-36",
      "tipo": "text",
      "left": "277.953px",
      "top": "151.906px",
      "width": "",
      "height": "",
      "texto": "Conexion"
    },
    {
      "id": "forma-37",
      "tipo": "rectangle",
      "left": "10.4375px",
      "top": "340.641px",
      "width": "",
      "height": "",
      "texto": "admin.php"
    },
    {
      "id": "forma-38",
      "tipo": "rectangle",
      "left": "26.6875px",
      "top": "236.906px",
      "width": "",
      "height": "",
      "texto": "usuario.php"
    },
    {
      "id": "forma-39",
      "tipo": "rectangle",
      "left": "347.172px",
      "top": "298.641px",
      "width": "",
      "height": "",
      "texto": "host.php"
    },
    {
      "id": "forma-40",
      "tipo": "rectangle",
      "left": "170.438px",
      "top": "308.141px",
      "width": "",
      "height": "",
      "texto": "Crear"
    },
    {
      "id": "forma-41",
      "tipo": "rectangle",
      "left": "155.438px",
      "top": "253.141px",
      "width": "",
      "height": "",
      "texto": "Leer"
    },
    {
      "id": "forma-43",
      "tipo": "rectangle",
      "left": "162.938px",
      "top": "418.141px",
      "width": "",
      "height": "",
      "texto": "Eliminar"
    },
    {
      "id": "forma-44",
      "tipo": "rectangle",
      "left": "170.438px",
      "top": "356.891px",
      "width": "",
      "height": "",
      "texto": "Actualizar"
    }
  ],
  "flechas": [
    {
      "desde": {
        "shapeId": "forma-2",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-3",
        "propId": null,
        "side": null
      },
      "tipo": "doble",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-3",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-7",
        "propId": null,
        "side": null
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-3",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-5",
        "propId": null,
        "side": null
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-2",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-15",
        "propId": null,
        "side": null
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-22",
        "propId": "prop-11",
        "side": "right"
      },
      "hasta": {
        "shapeId": "forma-30",
        "propId": "prop-29",
        "side": "left"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-22",
        "propId": "prop-11",
        "side": "right"
      },
      "hasta": {
        "shapeId": "forma-24",
        "propId": "prop-62",
        "side": "left"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-25",
        "propId": "prop-14",
        "side": "right"
      },
      "hasta": {
        "shapeId": "forma-24",
        "propId": "prop-13",
        "side": "left"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-22",
        "propId": "prop-11",
        "side": "right"
      },
      "hasta": {
        "shapeId": "forma-28",
        "propId": "prop-17",
        "side": "left"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-27",
        "propId": "prop-16",
        "side": "left"
      },
      "hasta": {
        "shapeId": "forma-28",
        "propId": "prop-41",
        "side": "right"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-22",
        "propId": "prop-11",
        "side": "left"
      },
      "hasta": {
        "shapeId": "forma-32",
        "propId": "prop-46",
        "side": "right"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-30",
        "propId": "prop-19",
        "side": "left"
      },
      "hasta": {
        "shapeId": "forma-32",
        "propId": "prop-47",
        "side": "right"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-29",
        "propId": "prop-18",
        "side": "left"
      },
      "hasta": {
        "shapeId": "forma-33",
        "propId": "prop-66",
        "side": "right"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-30",
        "propId": "prop-19",
        "side": "left"
      },
      "hasta": {
        "shapeId": "forma-23",
        "propId": "prop-12",
        "side": "left"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-33",
        "propId": "prop-65",
        "side": "left"
      },
      "hasta": {
        "shapeId": "forma-23",
        "propId": "prop-52",
        "side": "right"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-30",
        "propId": "prop-19",
        "side": "right"
      },
      "hasta": {
        "shapeId": "forma-25",
        "propId": "prop-55",
        "side": "left"
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-38",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-15",
        "propId": null,
        "side": null
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-41",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-38",
        "propId": null,
        "side": null
      },
      "tipo": "doble",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-41",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-39",
        "propId": null,
        "side": null
      },
      "tipo": "doble",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-40",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-39",
        "propId": null,
        "side": null
      },
      "tipo": "doble",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-43",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-37",
        "propId": null,
        "side": null
      },
      "tipo": "doble",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-44",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-37",
        "propId": null,
        "side": null
      },
      "tipo": "doble",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-37",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-40",
        "propId": null,
        "side": null
      },
      "tipo": "doble",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-37",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-41",
        "propId": null,
        "side": null
      },
      "tipo": "doble",
      "estilo": "straight"
    }
  ]
}
```
**003-plantilla de conexion.py**
```python
import mysql.connector

conexion = mysql.connector.connect(
    host="localhost",
    user="usuario-weplan",
    password="Usuarioweplan123$",
    database="WePlanDB"
)  

cursor = conexion.cursor()
cursor.execute("SELECT*FROM usuarios;")

filas = cursor.fetchall()

print(filas) 

```
**subcategorias_actividades.sql**
```sql
-- SUBCATEGOR√çAS DE ACTIVIDADES
-- Deporte (categor√≠a_id = 1)
(1, 'F√∫tbol'),
(2, 'P√°del'),
(3, 'Baloncesto'),
(4, 'Tenis'),
(5, 'Nataci√≥n'),
(6, 'Running'),
(7, 'Ciclismo'),
(8, 'Yoga'),

-- Relajaci√≥n (categor√≠a_id = 2)
(9, 'Caf√©'),
(10, 'Charla'),
(11, 'Cena'),
(12, 'Paseo'),
(13, 'Cine'),
(14, 'Juegos de mesa'),
(15, 'Picnic'),

-- M√∫sica (categor√≠a_id = 3)
(16, 'Conciertos'),
(17, 'Karaoke'),
(18, 'Club de m√∫sica'),
(19, 'Taller de instrumentos'),
(20, 'Festivales'),

-- Educaci√≥n (categor√≠a_id = 4)
(21, 'Idiomas'),
(22, 'Artes'),
(23, 'Danza'),
(24, 'Cocina'),
(25, 'Fotograf√≠a'),
(26, 'Literatura'),
(27, 'Teatro');

```
## 002-PHP
**001-guia.md**
```markdown
Hay una jeraqu√≠a de usuarios:
 -Usuario (Puede leer y usar vistas)
 -Host    (Puede leer-crear y usar vistas. Para eliminar cosas, debe contact al administrador)
 -Admin   (Puede leer-crear-eliminar-actualizar la base de datos y usar vistas)
 
Todos los usuarios pasan por un login.html (hoy 24-12-2025, esa pagina es 004-login.html) que le rediriges a sus sitios correspondientes:
 -Usuario (redirigido a home.php)
 -Host (redirigo a home.php donde tendr√° la posibilidad de ver una opci√≥n extra en el navegador a a√±adir en el futuro)
 -Admin (redirigido a admin.php donde le aparece un navegador lateral que contiene las cabeceras de las tablas, un boton de LECTURA y un boton de LOG-OUT
 -       tambien tiene a mano derecha el contenido delas tablas que aparecera SI le da click a unas de las cabeceras)
         



```
**002-primera prueba de conexion.php**
```php
<?php
 $host = "localhost";
 $user = "usuario-weplan";
 $pass = "Usuarioweplan123$";
 $db   = "WePlanDB";

 $conexion = new mysqli($host, $user, $pass, $db);
 $sql = "SELECT * FROM usuarios";
 $resultado = $conexion->query($sql);

 while ($fila = $resultado->fetch_assoc()) {
   echo '
     <article>
      <!-- Orden de las filas: nombre,apellidos,telefono,direccion,correo_electronico,pais,contrasenya,fecha_registro -->
      <h2>'.$fila['correo_electronico'].'</h2>
      <h2>'.$fila['contrasenya'].'</h2>
      <br>
      <h3>'.$fila['nombre'].'</h3>
      <p>'.$fila['apellidos'].'</p>
      <p>'.$fila['telefono'].'</p>
      <p>'.$fila['direccion'].'</p>
      <p>'.$fila['correo_electronico'].'</p>
      <p>'.$fila['pais'].'</p>
      <time>'.$fila['fecha_registro'].'</time>
     </article>
   ';
 }
 
 $conexion->close();
?>

```
**003-procesa_login.php**
```php
<?php
  session_start();
  $correo = trim($_POST['correo_electronico'] ?? '');
  $pass = $_POST['contrasenya'] ?? '';
  switch(true) {
      case (strlen($correo) < 5):
          $_SESSION['error'] = "El correo debe tener al menos 5 caracteres";      
          header("Location: ./004-login.php?error=correo_corto");
          exit(); 
          
      case (strlen($correo) > 25):
          $_SESSION['error'] = "El correo debe tener menos que 25 caracteres";       
          header("Location: ./004-login.php?error=correo_largo");
          exit();
          
      case (strlen($pass) < 8):
          $_SESSION['error'] = "La contrase√±a debe tener al menos 8 caracteres";       
          header("Location: ./004-login.php?error=pass_corto");
          exit();
          
      case (strlen($pass) > 16):
          $_SESSION['error'] = "La contrase√±a debe tener menor que 16 caracteres";       
          header("Location: ./004-login.php?error=pass_largo");
          exit();
  }
  
  $host = "localhost";
  $user = "usuario-weplan";
  $pass = "Usuarioweplan123$";
  $db   = "WePlanDB";
  $conexion = new mysqli($host, $user, $pass, $db);
  
	// Comprobacion exitosa pero mirando los datos que vienen del formulario en POST
  $sql = "
  	SELECT * FROM usuarios WHERE
    correo_electronico = '".$_POST['correo_electronico']."'
    AND contrasenya = '".$_POST['contrasenya']."';
  ";
	
  $resultado = $conexion->query($sql);

  if ($fila = $resultado->fetch_assoc()) {	// Si es cierto que hay un resultado
    $tipo = strtolower(trim($fila['tipo_de_usuario']));
    $_SESSION['usuario'] = 'si'; 
    $_SESSION['tipo_usuario'] = $tipo;
    $_SESSION['correo_usuario'] = $_POST['correo_electronico'];
    
    switch($tipo){      // Dependiendo del tipo de usuario es redigirido a un sitio diferente
      case 'admin':
          header("Location: ./tipo_de_usuario/admin.php");
          break;
      case 'host':
          header("Location: ./tipo_de_usuario/host.php");
          break;
      case 'usuario':
          header("Location: ./tipo_de_usuario/usuario.php");
          break; 
      default:
          header("Location: 005-exito.php");
          break;                             
    }
    exit();
  }else{																		// Si no hay ningun resultado
  	header("Location: ./004-login.php");					// En ese caso volvemos al login
  	exit();
  }

  $conexion->close();
  
?>

```
**004-login.php**
```php
<?php session_start(); ?>
<!doctype html>
<html lang="es">
  <head>
    <title>WePlan - Login</title>
    <meta charset="utf-8">
    <style>
     body,html{padding:0px;margin:0px;width:100%;height:100%;}
     body{display:flex;justify-content:center;align-items:center;text-align:center;background:BlanchedAlmond;}
     form{display:flex;flex-direction:column;width:200px;height:200px;background:#FFFFFD;padding:20px;align-items:center;gap:10px;justify-content:center;}
     input{width:100%;padding:15px;box-sizing:border-box;border:1 px solid lightgrey;}
     div{ font-size:13px;color:black;}
      #fake-footer{font-weight:bold;font-size:20px;}
      .error-message{font-weight:bold;font-size:18px;}
    </style>
  </head>
  <body>
    <main>  
      <div id="fake-header">
        <h1>P√°gina de Login v0.1 üîê</h1>
      </div>
      <form action="003-procesa_login.php" method="POST">
        <input type="text" name="correo_electronico" placeholder="Correo electr√≥nico">
        <input type="password" name="contrasenya" placeholder="Contrase√±a">
        <input type="submit">
      </form>
      <?php
      // Mostrar error de sesi√≥n si existe
      if (isset($_SESSION['error'])) {
          echo '<div class="error-message">';
          echo htmlspecialchars($_SESSION['error']);
          echo '</div>';
          unset($_SESSION['error']); // Limpiar despu√©s de mostrar
      }
      ?>        
      <div id="form-content">
        <p>üìã Requisitos:</p>
        <p>‚Ä¢ Usuario: 5-20 caracteres</p>
        <p>‚Ä¢ Contrase√±a: 8-16 caracteres</p>        
      </div>
      <div id="fake-footer">
       (c) Ayman x Bryan 2025      
      </div>
    </main>
  </body>
</html>

<?php
        // Mostrar estado de validaci√≥n del correo previo
        if (!empty($correo_previo)) {
            $color_correo = validarCorreoEnTiempoReal($correo_previo);
            $clase_correo = ($color_correo === 'green') ? 'valido' : 'invalido';
            
            echo '<p class="' . $clase_correo . '">';
            echo 'Correo: ' . strlen(trim($correo_previo)) . '/20 caracteres';
            
            if (!filter_var($correo_previo, FILTER_VALIDATE_EMAIL)) {
                echo ' (Formato inv√°lido)';
            }
            echo '</p>';
        }
?>

```
**005-exito.php**
```php
<?php 
 session_start();
  if(!isset($_SESSION['usuario'])){
     die("Te has colado, pero no te has colado exitosamente");
  }
?>

<html lang="es">
<body>
 <main>
  <p>Un d√≠a con m√°s PHP (tristemente), y ma√±ana no PHP</p>
 </main>
</body>
</html>


```
**006-logout.php**
```php
<?php
session_start();

// Guardar informaci√≥n del usuario para mostrar mensaje
$nombre = isset($_SESSION['nombre']) ? $_SESSION['nombre'] : '';

// Destruir sesi√≥n
session_unset();
session_destroy();

// Redirigir al login con mensaje
header("Location: 004-login.php?mensaje='Has salido con exito'");
exit();
?>

```
### tipo_de_usuario
**001-admin BRYAN.php**
```php
<!doctype html>
<html lang="es">
	<head>
  	<style>
    	html,body{width:100%;height:100%;padding:0px;margin:0px;}
    	body{display:flex;}
    	nav{background:#FF511C;padding:20px;gap:20px;display:flex;flex:1;flex-direction:column;height:max-content;}
    	nav a{background:#FFFFFF;color:#39D0BD;text-decoration:none;padding:10px;}
    	main{padding:20px;flex:4;}
     table td{padding:10px;}
     table{border:2px solid #39D0BD;width:100%;}   
     th{background:#FF511C;color:white;padding:10px;}
     
     #crear{	position:absolute;  bottom:20px;  right:20px;  background:#39D0BD;  color:#FF511C; 
	      height:40px; border-radius:40px;
       text-align:center;  font-size:30px;  line-height:40px;  text-decoration:none;  font-weight:bold;}
     .eliminar,.editar{	height:20px;  background:#39D0BD;  border-radius:30px;  color:#FF511C;
       line-height:20px;  text-decoration:none; text-align:center;  display:block;  }  
     #botones{color:#FFEAD4;border-radius:30px;display:flex;align-items:center;background:#40e0d0;}
    </style>
  </head>
  <body>
    <?php
        $host = "localhost";$user = "usuario-weplan";$pass = "Usuarioweplan123$";$db   = "WePlanDB";$conexion = new mysqli($host, $user, $pass, $db);
    ?>

    <nav>
     <div id="botones">
      <h2>admin.php </h2>
      <a href="./admin/read/leer.php" id="read-btn">Lectura</a>                                 <!-- accion leer (READ) -->
      <a href="../006-logout.php" class="logout-btn" id="boton-logout">Cerrar Sesi√≥n</a>
     </div>
    <?php
      // Listado de las tablas de la base de datos- WePlanDB
        $resultado = $conexion->query("SHOW TABLES;");
        while ($fila = $resultado->fetch_assoc()) {
          echo '<a href="?tabla='.$fila['Tables_in_'.$db].'">'.$fila['Tables_in_'.$db].'</a>';
        }
    ?>
    </nav>
    <main>
   
      <?php
      // Verificar si se ha seleccionado una tabla para luego mostrar sus cabeceras
      if (isset($_GET['tabla']) && !empty($_GET['tabla'])) {
         $tabla = $conexion->real_escape_string($_GET['tabla']);

         $resultado = $conexion->query("SELECT * FROM ".$_GET['tabla']." LIMIT 1;");    /// Solo quiero un ELEMENTO !!!//////
         if ($resultado && $resultado->num_rows > 0) {
           echo "<table>";                         // Inicio de tabl
           echo "<tr>";
           $fila = $resultado->fetch_assoc();
           foreach($fila as $clave=>$valor){
             echo "<th>".$clave."</th>";
           }
           echo "<th>Editar</th><th>Eliminar</th>";
           echo "</tr>";
          }
       // Y LUEGO EL RESTO DE DATOS ////////////
         $resultado = $conexion->query("
           SELECT * FROM ".$_GET['tabla'].";
         ");
         while ($fila = $resultado->fetch_assoc()) {
           echo "<tr>";

           foreach($fila as $clave=>$valor){
             echo "<td>".htmlspecialchars($valor)."</td>";
           }
           
           $id = reset($fila);
           echo "<td><a href='?tabla=".urlencode($tabla)."&accion=editar&id=".urlencode($id)."' class='editar' title='Cuidado que vas a editar un dato'>üñã</a></td>";
           echo "<td><a href='?tabla=".urlencode($tabla)."&accion=eliminar&id=".urlencode($id)."' class='eliminar' title='Cuidado EXTREMO que vas a ELIMINAR un dato'>‚úñ</a></td>";            
           echo "</tr>";
          }
          echo "</table>";                          // Fin de tabla
      } 
      ?>
      
     	<?php
      	                                            // Redirecionador de enlaces
      	if(isset($_GET['accion'])){
      	  $tabla_actual = isset($_GET['tabla']) ? $_GET['tabla']: '';
      	  
        	if($_GET['accion'] == "crear"){           // formulario crear (CREATE)
        	 if(!empty($tabla_actual)){
          	 include "./admin/create/formulario.php";
          	} else {
          	 echo "<p>Error, se debe seleccionar una tabla para CREAR </p>";
          	}
          	
          }else if($_GET['accion'] == "eliminar"){ // acci√≥n eliminar (DELETE)
           if(!empty($tabla_actual) && isset($_GET['id'])){
           	include "./admin/delete/eliminar.php";	
           } else {
          	 echo "<p>Error, se debe seleccionar una tabla para ELIMINAR </p>";           
           }
           
          } else if($_GET['accion'] == "editar"){   // acci√≥n actualizar (UPDATE)
           if(!empty($tabla_actual) && isset($_GET['id'])){
           	include "./admin/update/actualizar.php";	
           } else {
          	 echo "<p>Error, se debe seleccionar una tabla para ACTUALIZAR </p>";           
           }
          }                                         // Fin del condicional
          
        }                                           // Fin de conseguir acciones
        ?>
        
    <?php
     //  Muestra el boton si se ha "presionado" una tabla
     if(isset($_GET['tabla']) && !empty($_GET['tabla'])) {
        echo '<a href="?tabla='.urlencode($_GET['tabla']).'&accion=crear" id="crear">Crear</a>';
     }
    ?>
    </main>
  </body>
</html>

```
**002-admin AYMAN[Super-mejorado].php**
```php
<!doctype html>
<html lang="es">
	<head>
  	<style>
    	html,body{width:100%;height:100%;padding:0px;margin:0px;background:Aliceblue;}
    	body{display:flex;}
    	nav{background:BurlyWood;color:black;padding:20px;gap:20px;display:flex;flex:1;flex-direction:column;height:max-content;}
    	nav a{background:#FFFFFF;color:black;text-decoration:none;padding:10px;}
    	main{padding:20px;flex:4;}
     table td{padding:10px;}
     table{border:2px solid #39D0BD;width:100%;}   
     th{background:BurlyWood;color:black;padding:10px;}
     
     #crear{	position:absolute;  bottom:20px;  right:20px;  background:burlywood;  color:black; 
	      height:40px; border-radius:40px;
       text-align:center;  font-size:30px;  line-height:40px;  text-decoration:none;  font-weight:bold;}
     .eliminar,.editar{	height:20px;  background:BlanchedAlmond;  border-radius:30px;  color:black;
       line-height:20px;  text-decoration:none; text-align:center;  display:block;  }  
     #botones{color:;border-radius:30px;display:flex;align-items:center;background:BlanchedAlmond;}
    </style>
  </head>
  <body>
    <?php
        $host = "localhost";$user = "usuario-weplan";$pass = "Usuarioweplan123$";$db   = "WePlanDB";$conexion = new mysqli($host, $user, $pass, $db);
    ?>

    <nav>
     <div id="botones">
      <h2>admin.php </h2>
      <a href="./admin/read/leer.php" id="read-btn">Lectura</a>                                 <!-- accion leer (READ) -->
      <a href="../006-logout.php" class="logout-btn" id="boton-logout">Cerrar Sesi√≥n</a>
     </div>
    <?php
      // Listado de las tablas de la base de datos- WePlanDB
        $resultado = $conexion->query("SHOW TABLES;");
        while ($fila = $resultado->fetch_assoc()) {
          echo '<a href="?tabla='.$fila['Tables_in_'.$db].'">'.$fila['Tables_in_'.$db].'</a>';
        }
    ?>
    </nav>
    <main>
   
      <?php
      // Verificar si se ha seleccionado una tabla para luego mostrar sus cabeceras
      if (isset($_GET['tabla']) && !empty($_GET['tabla'])) {
         $tabla = $conexion->real_escape_string($_GET['tabla']);

         $resultado = $conexion->query("SELECT * FROM ".$_GET['tabla']." LIMIT 1;");    /// Solo quiero un ELEMENTO !!!//////
         if ($resultado && $resultado->num_rows > 0) {
           echo "<table>";                         // Inicio de tabl
           echo "<tr>";
           $fila = $resultado->fetch_assoc();
           foreach($fila as $clave=>$valor){
             echo "<th>".$clave."</th>";
           }
           echo "<th>Editar</th><th>Eliminar</th>";
           echo "</tr>";
          }
       // Y LUEGO EL RESTO DE DATOS ////////////
         $resultado = $conexion->query("
           SELECT * FROM ".$_GET['tabla'].";
         ");
         while ($fila = $resultado->fetch_assoc()) {
           echo "<tr>";

           foreach($fila as $clave=>$valor){
             echo "<td>".htmlspecialchars($valor)."</td>";
           }
           
           $id = reset($fila);
           echo "<td><a href='?tabla=".urlencode($tabla)."&accion=editar&id=".urlencode($id)."' class='editar' title='Cuidado que vas a editar un dato'>üñã</a></td>";
           echo "<td><a href='?tabla=".urlencode($tabla)."&accion=eliminar&id=".urlencode($id)."' class='eliminar' title='Cuidado EXTREMO que vas a ELIMINAR un dato'>‚úñ</a></td>";            
           echo "</tr>";
          }
          echo "</table>";                          // Fin de tabla
      } 
      ?>
      
     	<?php
      	                                            // Redirecionador de enlaces
      	if(isset($_GET['accion'])){
      	  $tabla_actual = isset($_GET['tabla']) ? $_GET['tabla']: '';
      	  
        	if($_GET['accion'] == "crear"){           // formulario crear (CREATE)
        	 if(!empty($tabla_actual)){
          	 include "./admin/create/formulario.php";
          	} else {
          	 echo "<p>Error, se debe seleccionar una tabla para CREAR </p>";
          	}
          	
          }else if($_GET['accion'] == "eliminar"){ // acci√≥n eliminar (DELETE)
           if(!empty($tabla_actual) && isset($_GET['id'])){
           	include "./admin/delete/eliminar.php";	
           } else {
          	 echo "<p>Error, se debe seleccionar una tabla para ELIMINAR </p>";           
           }
           
          } else if($_GET['accion'] == "editar"){   // acci√≥n actualizar (UPDATE)
           if(!empty($tabla_actual) && isset($_GET['id'])){
           	include "./admin/update/actualizar.php";	
           } else {
          	 echo "<p>Error, se debe seleccionar una tabla para ACTUALIZAR </p>";           
           }
          }                                         // Fin del condicional
          
        }                                           // Fin de conseguir acciones
        ?>
        
    <?php
     //  Muestra el boton si se ha "presionado" una tabla
     if(isset($_GET['tabla']) && !empty($_GET['tabla'])) {
        echo '<a href="?tabla='.urlencode($_GET['tabla']).'&accion=crear" id="crear">Crear</a>';
     }
    ?>
    </main>
  </body>
</html>

```
**admin.php**
```php
<!doctype html>
<html lang="es">
	<head>
  	<style>
    	html,body{width:100%;height:100%;padding:0px;margin:0px;background:Aliceblue;}
    	body{display:flex;}
    	nav{background:BurlyWood;color:black;padding:20px;gap:20px;display:flex;flex:1;flex-direction:column;height:max-content;}
    	nav a{background:#FFFFFF;color:black;text-decoration:none;padding:10px;}
    	a#boton-read,a#boton-logout{padding:14px;margin:8px;} 
    	
    	main{padding:20px;flex:4;}
     table td{padding:10px;}
     table{border:2px solid #39D0BD;width:100%;}   
     th{background:BurlyWood;color:black;padding:10px;}
     
     #crear{	position:absolute;  bottom:20px;  right:20px;  background:burlywood;  color:black; 
	      height:40px; border-radius:40px;
       text-align:center;  font-size:30px;  line-height:40px;  text-decoration:none;  font-weight:bold;}
     .eliminar,.editar{	height:20px;  background:BlanchedAlmond;  border-radius:30px;  color:black;
       line-height:20px;  text-decoration:none; text-align:center;  display:block;  }  
     #botones{border-radius:30px;display:flex;align-items:center;background:BlanchedAlmond;}
    </style>
  </head>
  <body>
    <?php
    //Verificador de Usuarios ///////////////////
    session_start();
    if (!isset($_SESSION['usuario']) || $_SESSION['usuario'] !== 'si') {
    header("Location: 004-login.html");
    exit();
    }

    // Verificar 2: ¬øEs admin?
    if (!isset($_SESSION['tipo_usuario']) || $_SESSION['tipo_usuario'] !== 'admin') {
        // No es admin - mostrar error
        echo '<h1>Acceso Denegado</h1>';
        echo '<p>Solo los administradores pueden acceder a esta p√°gina.</p>';
        echo '<a href="../004-login.html">Volver al inicio</a>';
        exit();
    }
    ?>
    
    <?php
        $host = "localhost";$user = "usuario-weplan";$pass = "Usuarioweplan123$";$db   = "WePlanDB";$conexion = new mysqli($host, $user, $pass, $db);
    ?>

    <nav>
     <div id="botones">
      <h2>admin.php </h2>
      <a href="./admin/read/leer.php" id="boton-read">Lectura</a>                                 <!-- accion leer (READ) -->
      <a href="../006-logout.php" id="boton-logout">Logout </a>
     </div>
    <?php
      // Listado de las tablas de la base de datos- WePlanDB
        $resultado = $conexion->query("SHOW TABLES;");
        while ($fila = $resultado->fetch_assoc()) {
          echo '<a href="?tabla='.$fila['Tables_in_'.$db].'">'.$fila['Tables_in_'.$db].'</a>';
        }
    ?>
    </nav>
    <main>
   
      <?php
      // Verificar si se ha seleccionado una tabla para luego mostrar sus cabeceras
      if (isset($_GET['tabla']) && !empty($_GET['tabla'])) {
         $tabla = $conexion->real_escape_string($_GET['tabla']);

         $resultado = $conexion->query("SELECT * FROM ".$_GET['tabla']." LIMIT 1;");    /// Solo quiero un ELEMENTO !!!//////
         if ($resultado && $resultado->num_rows > 0) {
           echo "<table>";                         // Inicio de tabla
           echo "<tr>";
           $fila = $resultado->fetch_assoc();
           foreach($fila as $clave=>$valor){
             echo "<th>".$clave."</th>";
           }
           echo "<th>Editar</th><th>Eliminar</th>";
           echo "</tr>";
          }
       // Y LUEGO EL RESTO DE DATOS ////////////
         $resultado = $conexion->query("
           SELECT * FROM ".$_GET['tabla'].";
         ");
         while ($fila = $resultado->fetch_assoc()) {
           echo "<tr>";

           foreach($fila as $clave=>$valor){
             echo "<td>".htmlspecialchars($valor)."</td>";
           }
           
           $id = reset($fila);
           echo "<td><a href='?tabla=".urlencode($tabla)."&accion=editar&id=".urlencode($id)."' class='editar' title='Cuidado que vas a editar un dato'>üñã</a></td>";
           echo "<td><a href='?tabla=".urlencode($tabla)."&accion=eliminar&id=".urlencode($id)."' class='eliminar' title='Cuidado EXTREMO que vas a ELIMINAR un dato'>‚úñ</a></td>";            
           echo "</tr>";
          }
          echo "</table>";                          // Fin de tabla
      } 
      ?>
      
     	<?php
      	                                            // Redirecionador de enlaces
      	if(isset($_GET['accion'])){
      	  $tabla_actual = isset($_GET['tabla']) ? $_GET['tabla']: '';
      	  
        	if($_GET['accion'] == "crear"){           // formulario crear (CREATE)
        	 if(!empty($tabla_actual)){
          	 include "./admin/create/formulario.php";
          	} else {
          	 echo "<p>Error, se debe seleccionar una tabla para CREAR </p>";
          	}
          	
          }else if($_GET['accion'] == "eliminar"){ // acci√≥n eliminar (DELETE)
           if(!empty($tabla_actual) && isset($_GET['id'])){
           	include "./admin/delete/eliminar.php";	
           } else {
          	 echo "<p>Error, se debe seleccionar una tabla para ELIMINAR </p>";           
           }
           
          } else if($_GET['accion'] == "editar"){   // acci√≥n actualizar (UPDATE)
           if(!empty($tabla_actual) && isset($_GET['id'])){
           	include "./admin/update/actualizar.php";	
           } else {
          	 echo "<p>Error, se debe seleccionar una tabla para ACTUALIZAR </p>";           
           }
          }                                         // Fin del condicional
          
        }                                           // Fin de conseguir acciones
        ?>
        
    <?php
     //  Muestra el boton si se ha "presionado" una tabla
     if(isset($_GET['tabla']) && !empty($_GET['tabla'])) {
        echo '<a href="?tabla='.urlencode($_GET['tabla']).'&accion=crear" id="crear">Crear</a>';
     }
    ?>
    </main>
  </body>
</html>

```
**host.php**
```php
test

```
**usuario.php**
```php
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WePlan</title>
    <style>
body {margin: 10px auto;font-family: Arial, sans-serif;max-width: 1800px;padding: 15px;}
nav {width: 100%;background-color: #fff;}
.div2 {display: flex;align-items: center;justify-content: space-between;padding: 10px 20px;}
.div2 img {height: 90px;width: 230px;}
.search-container {flex: 1;max-width: 500px;margin: 0 20px;}
.search-box {width: 100%;padding: 20px;border: 1px solid #ccc;border-radius: 20px;font-size: 17px;}
.bottons-container {display: flex;align-items: center;gap: 50px;}
.boton {background-color: white;border: none;border-radius: 50%;width: 60px;height: 60px;display: flex;align-items: center;justify-content: center;cursor: pointer;transition: all 0.3s ease;padding: 8px;}
.boton:hover {transform: translateY(-3px);box-shadow: 0 4px 8px rgba(0,0,0,0.3);background-color: #f8f9fa;}
.boton:active {transform: translateY(-1px);}
.icono {font-size: 24px;color: #2c3e50;}
.boton-usuario {width: 65px;height: 65px;border-radius: 50%;font-size: 40px;border: none;cursor: pointer;display: flex;align-items: center;justify-content: center;font-weight: bold;color: white;background-color: Green;transition: all 0.3s ease;box-shadow: 0 4px 8px rgba(0,0,0,0.2);}
.boton-usuario:hover {transform: scale(1.05);box-shadow: 0 6px 12px rgba(0,0,0,0.3);}
.div4 {display: flex;flex-direction: column;align-items: flex-start;padding: 10px;}
.titulo-inicio {font-size: 18px;font-weight: bold;color: black;margin-bottom: 1px;padding-bottom: 10px;width: 100%;}
.usuario-container {display: flex;align-items: center;gap: 15px;}
.foto-usuario {width: 75px;height: 75px;border-radius: 50%;display: flex;align-items: center;justify-content: center;font-size: 40px;font-weight: bold;color: white;cursor: pointer;transition: all 0.3s ease;box-shadow: 0 4px 8px rgba(0,0,0,0.2);background-color: Green;background-size: cover;background-position: center;}
.foto-usuario:hover {transform: scale(1.05);box-shadow: 0 6px 12px rgba(0,0,0,0.3);}
.foto-usuario:active {transform: scale(0.98);}
.con-foto {background-image: url('https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400&h=400&fit=crop');}
.actividades-container {display: grid;grid-template-columns: repeat(5,1fr);gap: 15px;margin: 0 auto;}
.actividad {background-color: white;border-radius: 12px;overflow: hidden;box-shadow: 0 4px 8px rgba(0,0,0,0.1);transition: all 0.3s ease;display: flex;flex-direction: column;height: 280px;}
.actividad:hover {transform: translateY(-5px);box-shadow: 0 8px 16px rgba(0,0,0,0.15);}
.imagen-actividad {height: 180px;width: 100%;overflow: hidden;}
.imagen-actividad img {width: 100%;height: 100%;object-fit: cover;transition: transform 0.5s ease;}
.actividad:hover .imagen-actividad img {transform: scale(1.05);}
.descripcion-actividad {padding: 15px;flex-grow: 1;display: flex;flex-direction: column;justify-content: center;background-color: white;}
.descripcion-actividad h3 {margin: 0 0 8px 0;font-size: 16px;color: #2c3e50;font-weight: 600;}
.descripcion-actividad p {margin: 0;font-size: 13px;color: #7f8c8d;line-height: 1.4;}
.div10 {padding: 1px;margin-top: 16px;}
.btn-grupo {width: 15%;padding: 18px;background: linear-gradient(to right, #6c757d, #87ceeb);color: white;border: none;border-radius: 10px;font-size: 18px;font-weight: bold;cursor: pointer;transition: all 0.3s;}
.btn-grupo:hover {background: linear-gradient(to right, #5a6268, #7ec8e3);box-shadow: 0 4px 12px rgba(135, 206, 235, 0.3);}
.btn-grupo:active {transform: translateY(-1px);}
.btn-grupo img {width: 24px;height: 24px;vertical-align: middle;margin-right: 8px;}
.div3 {grid-row-start: 4;grid-row-end: 6;}
.div11, .div12, .div13, .div14, .div15 {grid-row-start: 1;}
.nombre-usuario {font-size: 16px;color: #2c3e50;font-weight: 600;}    
    </style>
</head>
<body>
 <nav>
     <div class="div2">
      <img src="fotos/weplan-high-resolution-logo-grayscale.png" alt="WePlan Logo">
      <div class="search-container">
             <input type="text" class="search-box" placeholder="Buscar...">
      </div>
            <div class="bottons-container">
             <button class="boton">
                 <div class="icono">üè†</div>
             </button>
             <button class="boton">
                 <div class="icono">üßó</div>
             </button>
            
             <button class="boton">
                 <div class="icono">üîî</div>
             </button>

              <button class="boton-usuario">
                B
              </button>
             </div>
     </div>   
 </nav>
    <div class="parent">

        <div class="div4">
        <div class="titulo-inicio">INICIO</div>
        
        <div class="usuario-container">
            <div class="foto-usuario" id="fotoUsuario">
                A
            </div>
            <div class="nombre-usuario" id="nombreUsuario">aymanmzkk  |  Valencia</div>
        </div>
    </div>
    <h3> Tus grupos</h3>
        <div class="actividades-container"> 
        <!-- Div5 - grupo 1 -->
        <div class="actividad div5">
            <div class="imagen-actividad">
                <img src="fotos/coffee and chill.jpg" alt="Coffee and Chill">
            </div>
            <div class="descripcion-actividad">
                <h3>Coffee and Chill</h3>
                <p>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</p>
                <p>üìå Valencia, Spain</p>
                <p>üë• 67 Members-Public</p>
            </div>
        </div>

        <!-- Div6 - grupo 2 -->
        <div class="actividad div6">
            <div class="imagen-actividad">
                <img src="fotos/Football7Valencia.jpg" alt="Football7Valencia">
            </div>
            <div class="descripcion-actividad">
                <h3>Football7Valencia</h3>
                <p>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</p>
                <p>üìå Valencia, Spain</p>
                <p>üë• 99 Members-Public</p>
            </div>
        </div>
        
        <!-- Div7 - grupo 3 -->
        <div class="actividad div7">
            <div class="imagen-actividad">
                <img src="fotos/cocinar juntos.jpg" alt="Cocinar Juntos">
            </div>
            <div class="descripcion-actividad">
                <h3>Cocinar Juntos</h3>
                <p>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</p>
                <p>üìå Valencia, Spain</p>
                <p>üë• 106 Members-Public</p>
            </div>
        </div>
        
        <!-- Div8 - grupo 4 -->
        <div class="actividad div8">
            <div class="imagen-actividad">
                <img src="fotos/street basketball.jpg" alt="Basketball Lovers">
            </div>
            <div class="descripcion-actividad">
                <h3>Basketball Lovers</h3>
                <p>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</p>
                <p>üìå Valencia, Spain</p>
                <p>üë• 17 Members-Public</p>
            </div>
        </div>
        
        <!-- Div9 - grupo 5 -->
        <div class="actividad div9">
            <div class="imagen-actividad">
                <img src="fotos/pintura.jpg" alt="Pintura Creativa">
            </div>
            <div class="descripcion-actividad">
                <h3>Pintura Creativa</h3>
                <p>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</p>
                <p>üìå Valencia, Spain</p>
                <p>üë• 25 Members-Public</p>
            </div>
        </div>
    </div>
        <!-- Div10 -  btn-grupo -->
     <div class="div10">
        <button class="btn-grupo"><img src="fotos/crear_grupo_emoji.png">Crear Nuevo Grupo</button>
    </div>
    <h3> Tus actividades</h3>
        <div class="actividades-container"> 
        <!-- Div11 - Actividad 1 -->
        <div class="actividad div11">
            <div class="imagen-actividad">
                <img src="https://images.unsplash.com/photo-1540497077202-7c8a3999166f?w=400&h=300&fit=crop" alt="Senderismo">
            </div>
            <div class="descripcion-actividad">
                <h3>Senderismo en Monta√±a</h3>
                <p>Ruta de 8km por los senderos naturales. Nivel moderado, apto para principiantes.</p>
            </div>
        </div>
        
        <!-- Div12 - Actividad 2 -->
        <div class="actividad div12">
            <div class="imagen-actividad">
                <img src="https://images.unsplash.com/photo-1562771379-eafdca7a02f8?w=400&h=300&fit=crop" alt="Yoga">
            </div>
            <div class="descripcion-actividad">
                <h3>Clase de Yoga Matutina</h3>
                <p>Sesiones de yoga para todos los niveles. Enfocado en respiraci√≥n y flexibilidad.</p>
            </div>
        </div>
        
        <!-- Div13 - Actividad 3 -->
        <div class="actividad div13">
            <div class="imagen-actividad">
                <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w-400&h=300&fit=crop" alt="Cocina">
            </div>
            <div class="descripcion-actividad">
                <h3>Taller de Cocina Saludable</h3>
                <p>Aprende recetas f√°ciles y nutritivas. Incluye todos los ingredientes necesarios.</p>
            </div>
        </div>
        
        <!-- Div14 - Actividad 4 -->
        <div class="actividad div14">
            <div class="imagen-actividad">
                <img src="https://images.unsplash.com/photo-1536922246289-88c42f957773?w=400&h=300&fit=crop" alt="Bicicleta">
            </div>
            <div class="descripcion-actividad">
                <h3>Paseo en Bicicleta</h3>
                <p>Recorrido urbano de 15km. Alquiler de bicicletas incluido para participantes.</p>
            </div>
        </div>
        
        <!-- Div15 - Actividad 5 -->
        <div class="actividad div15">
            <div class="imagen-actividad">
                <img src="https://images.unsplash.com/photo-1518609878373-06d740f60d8b?w=400&h=300&fit=crop" alt="Pintura">
            </div>
            <div class="descripcion-actividad">
                <h3>Workshop de Pintura</h3>
                <p>Explora tu creatividad con acuarelas. Materiales incluidos, no se requiere experiencia.</p>
            </div>
        </div>
    </div>   
</body>
</html>

```
#### admin
##### create
**formulario.php**
```php
<?php
// Conexi√≥n a la base de datos
$host = "localhost";
$user = "usuario-weplan";
$pass = "Usuarioweplan123$";
$db   = "WePlanDB";
$conexion = new mysqli($host, $user, $pass, $db);

// Obtener la tabla desde la URL
if (!isset($_GET['tabla']) || empty($_GET['tabla'])) {
    echo "<p>Error: No se seleccion√≥ una tabla. Vuelve atr√°s y selecciona una tabla.</p>";
    echo '<a href="../../admin.php">‚Üê Volver</a>';
    exit;
}
$tabla = $conexion->real_escape_string($_GET['tabla']);

// Obtener estructura de la tabla
$resultado = $conexion->query("SHOW COLUMNS FROM `$tabla`");
if (!$resultado) {
    echo "<p>Error: No se pudo obtener informaci√≥n de la tabla '$tabla'</p>";
    echo '<a href="../../admin.php">‚Üê Volver</a>';
    exit;
}

echo '<form action="./admin/create/procesaformulario.php" method="POST">';
echo '<input type="hidden" name="tabla" value="'.htmlspecialchars($tabla).'">';
echo '<h2>Creaci√≥n de registro en tabla "'.htmlspecialchars($tabla).'"</h2>';

while ($columna = $resultado->fetch_assoc()) {
    $nombre = $columna['Field'];
    $tipo = $columna['Type'];
    
    // Saltar columnas auto_increment
    if (strpos($columna['Extra'], 'auto_increment') !== false) {
        continue;
    }
    
    // Saltar timestamps autom√°ticos
    if (($nombre == 'fecha_registro' || $nombre == 'fecha_creacion') && 
        strpos($columna['Default'], 'CURRENT_TIMESTAMP') !== false) {
        continue;
    }
    
    // Crear label amigable
    $label = ucwords(str_replace('_', ' ', $nombre));
    
    // Determinar tipo de input
    $tipo_input = 'text';
    $es_textarea = false;
    
    // Por nombre de campo
    if (strpos(strtolower($nombre), 'email') !== false) {
        $tipo_input = 'email';
    } elseif (strpos(strtolower($nombre), 'telefono') !== false) {
        $tipo_input = 'tel';
    } elseif (strpos(strtolower($nombre), 'password') !== false || strpos(strtolower($nombre), 'contrasenya') !== false) {
        $tipo_input = 'password';
    } elseif (strpos(strtolower($nombre), 'fecha') !== false && strpos(strtolower($nombre), 'hora') !== false) {
        $tipo_input = 'datetime-local';
    } elseif (strpos(strtolower($nombre), 'fecha') !== false) {
        $tipo_input = 'date';
    } elseif (strpos(strtolower($tipo), 'int') !== false || strpos(strtolower($nombre), 'id_') !== false) {
        $tipo_input = 'number';
    } elseif (strpos(strtolower($nombre), 'descripcion') !== false) {
        $es_textarea = true;
    }
    
    // Por tipo de dato MySQL
    if (strpos(strtolower($tipo), 'text') !== false) {
        $es_textarea = true;
    }
    
    echo '<div class="controlformulario">';
    echo '<label for="'.$nombre.'">'.$label.'</label>';
    
    if ($es_textarea) {
        echo '<textarea name="'.$nombre.'" id="'.$nombre.'" ';
        if ($columna['Null'] == 'NO' && !$columna['Default']) {
            echo 'required';
        }
        echo ' placeholder="'.$label.'"></textarea>';
    } else {
        echo '<input type="'.$tipo_input.'" name="'.$nombre.'" id="'.$nombre.'" ';
        
        // Atributos adicionales
        if ($tipo_input == 'number') {
            if (strpos(strtolower($nombre), 'id_') !== false) {
                echo 'min="1" ';
            } elseif ($nombre == 'max_miembros') {
                echo 'min="1" max="1000" value="50" ';
            }
        }
        
        if ($columna['Null'] == 'NO' && !$columna['Default']) {
            echo 'required';
        }
        
        echo ' placeholder="'.$label.'">';
    }
    
    echo '</div>';
}

$conexion->close();

echo "<div>";
echo "<input type='submit' value='crear Registros'>";
echo '<a href="../tipo_de_usuario/admin.php?tabla=<?php echo urlencode($tabla); ?>" style="margin-left:10px;">Cancelar</a>';
echo "</div>";
echo "</form>";
?>
<style>
 .controlformulario{padding:3px;width:100px;display:inline-block;}
 label{font-weight:bold;font-size:15px;}
</style>

```
**procesaformulario.php**
```php
<?php
// Validar tabla
if (!isset($_POST['tabla']) || empty($_POST['tabla'])) {
    die("Error: No se especific√≥ la tabla");
}
$tabla = $_POST['tabla'];

$host = "localhost";
$user = "usuario-weplan";
$pass = "Usuarioweplan123$";
$db   = "WePlanDB";
$conexion = new mysqli($host, $user, $pass, $db);

// Validar que tabla existe
$tabla_valida = $conexion->query("SHOW TABLES LIKE '$tabla'");
if ($tabla_valida->num_rows == 0) {
    die("Error: La tabla '$tabla' no existe");
}

// Obtener columnas de la tabla
$resultado = $conexion->query("SHOW COLUMNS FROM `$tabla`");
$columnas_validas = [];

while ($columna = $resultado->fetch_assoc()) {
    $columnas_validas[] = $columna['Field'];
}

// Preparaci√≥n de datos para INSERT
$campos = [];
$valores = [];

foreach ($_POST as $campo => $valor) {
    if ($campo == 'tabla') continue;
    
    // Solo incluir campos que existen en la tabla
    if (in_array($campo, $columnas_validas)) {
        $campos[] = "`$campo`";
        $valores[] = "'" . $conexion->real_escape_string($valor) . "'";
    }
}

//Consulta SQL de CREATE
$sql = "INSERT INTO `$tabla` (" . implode(", ", $campos) . ") 
        VALUES (" . implode(", ", $valores) . ")";

// Ejecuta
if ($conexion->query($sql)) {
    echo "Registro creado en '$tabla'<br>";
} else {
    echo "Error: " . $conexion->error . "<br>";
}

$conexion->close();
header("Location: ../../admin.php");												// Volvemos a admin
?>

  

```
##### delete
**eliminar.php**
```php
<?php
$tabla = $_GET['tabla'] ?? '';
$id = $_GET['id'] ?? '';

if(empty($tabla) || empty($id)) {
    // Redirigir con error
    header("Location: ../../admin.php?error=faltan_datos");
    exit;
}

$host = "localhost";
$user = "usuario-weplan";
$pass = "Usuarioweplan123$";
$db   = "WePlanDB";
$conexion = new mysqli($host, $user, $pass, $db);

// Estructura para Nombre de la columna ID
$id_column = 'usuario_id';                       // El por de defecto
if ($tabla == 'grupos') $id_column = 'grupo_id';
// Tablas normales
elseif ($tabla == 'categorias_actividades') $id_column = 'categoria_id';
elseif ($tabla == 'subcategorias_actividades') $id_column = 'subcategoria_id';
elseif ($tabla == 'aficiones') $id_column = 'aficion_id';
elseif ($tabla == 'eventos') $id_column = 'evento_id';
// tablas de relaci√≥n 
elseif ($tabla == 'usuario_grupo' || $tabla == 'usuario_aficion' || 
        $tabla == 'grupo_subcategoria' || $tabla == 'evento_participantes') {
    echo "<p>Error: Las tablas de relaci√≥n requieren manejo especial.</p>";
    echo "<a href='../../admin.php?tabla=".urlencode($tabla)."'>Volver</a>";
}
    

// Ejecutar DELETE
$sql = "DELETE FROM `$tabla` WHERE $id_column = " . intval($id);
$conexion->query($sql);
$conexion->close();

echo "<script>
    // Muestrame mensaje de √©xito
    alert('Registro eliminado!');
    
    // Recargame la p√°gina manteniendo la misma tabla
    window.location.href = './admin.php?tabla=" . urlencode($tabla) . "';
</script>";
?>

```
**formulario_eliminar.php**
```php
<?php
  // Recibe y valida par√°metros
  if (!isset($_GET['tabla']) || empty($_GET['tabla'])) {
      die("Error: No se especific√≥ la tabla");
  }
  if (!isset($_GET['id']) || empty($_GET['id'])) {
      die("Error: No se especific√≥ el ID");
  }

  $tabla = $_GET['tabla'];
  $id = $_GET['id'];
  $id_column = 'usuario_id';

  $host = "localhost";
  $user = "usuario-weplan";
  $pass = "Usuarioweplan123$";
  $db   = "WePlanDB";
  $conexion = new mysqli($host, $user, $pass, $db);	 

// Estructura para Nombre de la columna ID
$id_column = 'usuario_id';                       // El por de defecto
if ($tabla == 'grupos') $id_column = 'grupo_id';
// Tablas normales
elseif ($tabla == 'categorias_actividades') $id_column = 'categoria_id';
elseif ($tabla == 'subcategorias_actividades') $id_column = 'subcategoria_id';
elseif ($tabla == 'aficiones') $id_column = 'aficion_id';
elseif ($tabla == 'eventos') $id_column = 'evento_id';
// tablas de relaci√≥n 
elseif ($tabla == 'usuario_grupo' || $tabla == 'usuario_aficion' || 
        $tabla == 'grupo_subcategoria' || $tabla == 'evento_participantes') {
    echo "<p>Error: Las tablas de relaci√≥n requieren manejo especial.</p>";
    echo "<a href='../../admin.php?tabla=".urlencode($tabla)."'>Volver</a>";
}
    
  // Accion SQL para DELETE    
  $sql = "DELETE FROM `$tabla` WHERE $id_column = " . intval($id);								
  
  if($conexion->query($sql)) {
      echo " Registro eliminado correctamente<br>";
      echo "<a href='../../admin.php'>Volver</a>";
  } else {
      echo "Error: " . $conexion->error . "<br>";
      echo "<a href='../../admin.php'>Volver</a>";
  }

  $conexion->close();																       
?>

```
##### read
**leer.php**
```php
<?php
	session_start(); // Arranco una sesion
 $host = "localhost";
 $user = "usuario-weplan";
 $pass = "Usuarioweplan123$";
 $db   = "WePlanDB";
 $conexion = new mysqli($host, $user, $pass, $db);

	
 // Lista de las tablas en la base de datos


  $resultado = $conexion->query("SHOW TABLES;");
  echo "<a href='../../admin.php' id='volver-btn'>Volver</a>";  
  while ($fila = $resultado->fetch_assoc()) {
    echo "<div>";  
    echo '<a href="?tabla='.$fila['Tables_in_'.$db].'">'.$fila['Tables_in_'.$db].'</a>';
    echo "</div>";
  }
if(isset($_GET['tabla']) && !empty($_GET['tabla'])) {
    $tabla = $conexion->real_escape_string($_GET['tabla']);
    $sql = "SELECT * FROM ".$_GET['tabla']." LIMIT 1;";	
     $resultado = $conexion->query($sql);
     while ($fila = $resultado->fetch_assoc()) {
     	var_dump($fila);
     }
	  }
	  
  $conexion->close();
?>
<style>
 a{padding:2px;text-decoration:none;font-weight:bold;}
 div{display:flex;}
 #volver-btn{font-size:25px;}
</style>

```
##### update
**actualizar.php**
```php
<?php
// Recibe y valida par√°metros
if (!isset($_GET['tabla']) || empty($_GET['tabla'])) {
    die("Error: No se especific√≥ la tabla");
}
if (!isset($_GET['id']) || empty($_GET['id'])) {
    die("Error: No se especific√≥ el ID");
}

$tabla = $_GET['tabla'];
$id = $_GET['id'];

$host = "localhost";
$user = "usuario-weplan";
$pass = "Usuarioweplan123$";
$db   = "WePlanDB";
$conexion = new mysqli($host, $user, $pass, $db);

// Estructura para Nombre de la columna ID
$id_column = 'usuario_id';                       // El por de defecto
if ($tabla == 'grupos') $id_column = 'grupo_id';
// Tablas normales
elseif ($tabla == 'categorias_actividades') $id_column = 'categoria_id';
elseif ($tabla == 'subcategorias_actividades') $id_column = 'subcategoria_id';
elseif ($tabla == 'aficiones') $id_column = 'aficion_id';
elseif ($tabla == 'eventos') $id_column = 'evento_id';
// tablas de relaci√≥n 
elseif ($tabla == 'usuario_grupo' || $tabla == 'usuario_aficion' || 
        $tabla == 'grupo_subcategoria' || $tabla == 'evento_participantes') {
    echo "<p>Error: Las tablas de relaci√≥n requieren manejo especial.</p>";
    echo "<a href='../../admin.php?tabla=".urlencode($tabla)."'>Volver</a>";
    exit;
}

// Obtener datos actuales del registro
$sql = "SELECT * FROM `$tabla` WHERE $id_column = " . intval($id);
$resultado = $conexion->query($sql);

 echo '<h2>Actualizaci√≥n de un registro  en '.htmlspecialchars($tabla).'</h2>';
?>

<form action="./admin/update/formulario_actualizar.php" method="POST">
 <div class="controlformulario">
      <p>Introduce el ID del elemento que quieres <b>actualizar</b>:</p>
      <!-- Input que no se muestran-->
      <input type="hidden" name="tabla" value="<?php echo htmlspecialchars($tabla); ?>">
      <input type="hidden" name="id_column" value="<?php echo $id_column; ?>">
      <input type="hidden" name="id" value="<?php echo htmlspecialchars($id); ?>">
      <!-- Input que muestran generados con PHP-->
    <?php
    $fila = $resultado->fetch_assoc();
    // Generar campos din√°micamente
    foreach ($fila as $campo => $valor) {
        if ($campo == $id_column) continue;
        if ($campo == 'fecha_registro' || $campo == 'fecha_creacion') continue;
        
        $label = ucwords(str_replace('_', ' ', $campo));
        $tipo = 'text';
        
        if (strpos($campo, 'email') !== false) $tipo = 'email';
        elseif (strpos($campo, 'telefono') !== false) $tipo = 'tel';
        elseif (strpos($campo, 'contrasenya') !== false) $tipo = 'password';
        elseif (strpos($campo, 'descripcion') !== false) {
            echo '<div class="controlformulario">
                <label for="'.$campo.'">'.$label.'</label>
                <textarea name="'.$campo.'" id="'.$campo.'">'.htmlspecialchars($valor).'</textarea>
            </div>';
            continue;
        }
        
        echo '<div class="controlformulario">
            <label for="'.$campo.'">'.$label.'</label>
            <input type="'.$tipo.'" name="'.$campo.'" id="'.$campo.'" 
                   value="'.htmlspecialchars($valor).'">
        </div>';
    }
    ?>      
      <input type="submit" value="Actualizar registro">
      <a href="../tipo_de_usuario/admin.php?tabla=<?php echo urlencode($tabla); ?>" style="margin-left:10px;">Cancelar</a>
 </div>
</form>

<style>
 div{padding:3px;}
 .controlformulario{font-weight:bold;font-size:15px;display:inline-block;}
</style>

```
**formulario_actualizar.php**
```php
<?php
if (!isset($_POST['tabla']) || empty($_POST['tabla'])) {
    die("Error: No se especific√≥ la tabla");
}
if (!isset($_POST['id']) || empty($_POST['id'])) {
    die("Error: No se especific√≥ el ID");
}

$tabla = $_POST['tabla'];
$id = $_POST['id'];

$host = "localhost";
$user = "usuario-weplan";
$pass = "Usuarioweplan123$";
$db   = "WePlanDB";
$conexion = new mysqli($host, $user, $pass, $db);

// Determinar columna ID
$id_column = isset($_POST['id_column']) ? $_POST['id_column'] : 'usuario_id';

// Construir consulta UPDATE din√°mica
$actualizaciones = [];
foreach ($_POST as $campo => $valor) {
    if ($campo == 'tabla' || $campo == 'id' || $campo == 'id_column') continue;
    
    $actualizaciones[] = "`$campo` = '" . $conexion->real_escape_string($valor) . "'";
}

if (empty($actualizaciones)) {
    die("Error: No hay campos para actualizar");
}


$sql = "UPDATE `$tabla` SET " . implode(", ", $actualizaciones) . 
       " WHERE $id_column = " . intval($id);


if($conexion->query($sql)) {
      echo " Registro actualizado correctamente<br>";
      echo "<a href='../../admin.php'>Volver</a>";
  } else {
      echo "Error: " . $conexion->error . "<br>";
      echo "<a href='../../admin.php'>Volver</a>";
}
	
  $conexion->close();
?>

```